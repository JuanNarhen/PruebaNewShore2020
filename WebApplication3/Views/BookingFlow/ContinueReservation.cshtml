@model WebApplication3.Models.ViewModels.ReservationViewModel
@{
    ViewData["Title"] = "ContinueReservation";

    var viewPassengers = new List<WebApplication3.Models.Areas.BookingFlow.Passenger>();
}

<h1>CONTINUAR CON TU RESERVA</h1>

<br />
<hr />
<br />

<div class="row">
    <form asp-action="ContinueReservation">
        <div class="form-group row just">
            <div class="col-sm-4 form-group">
                <label class="control-label">Nombre</label>
                <div>
                    <input type="text" asp-for="BookingContact.Name" required />
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <label class="control-label">Correo Electr&oacute;nico</label>
                <div>
                    <input type="email" asp-for="BookingContact.Email" required />
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <label class="control-label">Tel&eacute;fono</label>
                <div>
                    <input type="number" asp-for="BookingContact.Phone" required />
                </div>
            </div>
            <div class="form-group">
                <input type="submit" value="Finalizar Reservaci&oacute;n" class="btn btn-primary btn-sm" />
            </div>
        </div>
    </form>
</div>


<div class="row">
    <form id="formPassenger">
        <div class="form-group">
            <label>Nombre</label>
            <input type="text" id="txtName"/>
        </div>
        <div class="form-group">
            <label>Fecha de Nacimiento</label>
            <input type="date" id="datBirthDate"/>
        </div>
        <div class="col-md-1 form-group">
            <input type="button" value="A&ntilde;adir pasajero" id="btnAdd" class="btn btn-primary btn-sm" />
        </div>
        <div class="col-md-1 form-group">
            <input type="submit" value="Eliminar Pasajero" id="btnDel" class="btn btn-primary btn-sm" />
        </div>
    </form>
</div>

<div >

</div>
<div id="result">

</div>




<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script type="text/javascript">

    $(function () {
        $("#btnAdd").click(function (){

            var url = "@Url.Action("AddPassenger", "BookingFlow")";
            var name = $("#txtName").val();
            var date = $("#datBirthDate").val();
            var data = { name: name, date: date, passengers: "@Model.RegistredPassengers" };

            $.get(url, data).done(function (data) {
                $("#result").append(data);
            });
        });

        $("#btnDel").click(function (){

            var url = "@Url.Action("DelPassenger", "BookingFlow")";
            var data = { passengers : "@Model.RegistredPassengers" };
            $.get(url, data).done(function (data) {
                $("#passengersList").append(data)
            });
        });
    });

</script>


